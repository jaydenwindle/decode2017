<% content_for :javascript do %>
  <% javascript_include_tag 'dash_main', :id => 'dash-main-script', :'data-embed' => !@giveaways.any? %>
<% end %>
<% content_for :javascript do %>
  <% if !@giveaways.any? %>
    <% javascript_include_tag 'dash_submit', :id => 'dash-script', :'data-embed' => !@giveaways.any? %>
  <% end %>
<% end %>

<div class="centerify">
  <div>
    <div class="container">
      <div class="row mt-2 mb-5">
        <div class="col-12 text-center">
          <h1>Welcome to the Giveaways!</h1>
          <p>Where you give stuff away for free. Because business.</p>
        </div>
      </div>

      <% if !@giveaways.any? %>

        <div class="row" ng-if="giveaways.length === 0">
          <div class="col-8 offset-2 text-center">
            <p class="lead">You've never given anything away before. Stop being a republican and let's create a giveaway.</p>
          </div>
        </div>

      <% else %>

      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-12">
              <% if @giveaways.length == 1 %>
                <h3>Current giveaway</h3>
              <% else %>
                <h3>Most active giveaway</h3>
              <% end %>
            </div>
          </div>

          <!-- main giveaway -->
          <div class="row">
            <div class="card card-inverse card-massive col-12" style="background-image: url(https://www.tesla.com/tesla_theme/assets/img/models/section-hero-background.jpg?20170115); ">
              <div class="w-100 overlay">
                <div class="col-12 text-left">
                  <div class="card-block">
                    <h4 class="card-title mb-0">Sample giveaway</h4>
                  </div>

                  <ul class="list-group list-group-flush">
                    <li class="list-group-item"><span class="font-weight-bold"><span class="mr-1">⏰</span> left</span><span class="super-bold ml-auto">23 days</span></li>
                    <li class="list-group-item"><span class="font-weight-bold">Number of <span class="ml-1">😊</span></span><span class="super-bold ml-auto">1000 ppl.</span></li>
                    <li class="list-group-item"><span class="font-weight-bold">Number of <span class="ml-1">💰</span></span><span class="super-bold ml-auto">10 prizes</span></li>
                  </ul>

                  <div class="card-block text-right">
                    <a href="#" class="btn btn-sm btn-danger">End</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- "main" giveaway  -->

      <% if @giveaways.length > 1 %>
        <!-- Current: start -->
        <div class="row">
          <div class="col-12">
            <div class="row">
              <div class="col-12">
                <h3>Other giveaways</h3>
              </div>
            </div>

            <div class="row">
              <div class="col-12">
                <div>
                  
                  <% @giveaways.each { |giveaway| %>
                    <div class="card mb-3">
                      <div class="card-block">
                        <h4 class="card-title pl-0 mb-0"><%= giveaway.name %></h4>
                      </div>

                      <ul class="list-group list-group-flush">
                        <li class="list-group-item"><span class="font-weight-bold">Start <span class="ml-1">⏰</span></span><span class="super-bold ml-auto"><%= @prettyStart[giveaway.id] %></span></li>
                        <li class="list-group-item"><span class="font-weight-bold">Number of <span class="ml-1">😊</span></span><span class="super-bold ml-auto"><%= @nApplicants[giveaway.id] %> people</span></li>
                        <li class="list-group-item"><span class="font-weight-bold">Number of <span class="ml-1">💰</span></span><span class="super-bold ml-auto"><%= @nPrizes[giveaway.id] %> prizes</span></li>
                      </ul>

                      <div class="card-block text-right">
                        <a href="#" class="btn btn-sm btn-danger">End</a>
                      </div>
                    </div>
                  <% } %>

                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Current: end -->
      <% end %>

      <!-- Past: start -->
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-12">
              <h3>Past giveaways</h3>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
              <!-- start columns -->
              <div class="card-columns">
                <!-- ng-repeat: giveaway in giveaways -->
                <div class="card ended">
                  <div class="card-block">
                    <h4 class="card-title pl-0 mb-0">Sample giveaway</h4>
                  </div>

                  <ul class="list-group list-group-flush">
                    <li class="list-group-item"><span class="font-weight-bold"><span class="mr-1">⏰</span> ran</span><span class="super-bold ml-auto">23 days</span></li>
                    <li class="list-group-item"><span class="font-weight-bold">Number of <span class="ml-1">😊</span></span><span class="super-bold ml-auto">1000 ppl.</span></li>
                    <li class="list-group-item"><span class="font-weight-bold">Number of <span class="ml-1">💰</span></span><span class="super-bold ml-auto">10 prizes</span></li>
                  </ul>
                </div>
                <!-- ng-repeat: end -->

                <div class="card ended">
                  <div class="card-block">
                    <h4 class="card-title pl-0 mb-0">Sample giveaway</h4>
                  </div>

                  <ul class="list-group list-group-flush">
                    <li class="list-group-item"><span class="font-weight-bold"><span class="mr-1">⏰</span> ran</span><span class="super-bold ml-auto">23 days</span></li>
                    <li class="list-group-item"><span class="font-weight-bold"><span class="mr-1">⏰</span> planned</span><span class="super-bold ml-auto">23 days</span></li>
                    <li class="list-group-item"><span class="font-weight-bold">Number of <span class="ml-1">😊</span></span><span class="super-bold ml-auto">1000 ppl.</span></li>
                    <li class="list-group-item"><span class="font-weight-bold">Number of <span class="ml-1">💰</span></span><span class="super-bold ml-auto">10 prizes</span></li>
                  </ul>
                </div>
                
                <div class="card ended">
                  <div class="card-block">
                    <h4 class="card-title pl-0 mb-0">Sample giveaway</h4>
                  </div>

                  <ul class="list-group list-group-flush">
                    <li class="list-group-item"><span class="font-weight-bold"><span class="mr-1">⏰</span> ran</span><span class="super-bold ml-auto">23 days</span></li>
                    <li class="list-group-item"><span class="font-weight-bold"><span class="mr-1">⏰</span> planned</span><span class="super-bold ml-auto">23 days</span></li>
                    <li class="list-group-item"><span class="font-weight-bold">Number of <span class="ml-1">😊</span></span><span class="super-bold ml-auto">1000 ppl.</span></li>
                    <li class="list-group-item"><span class="font-weight-bold">Number of <span class="ml-1">💰</span></span><span class="super-bold ml-auto">10 prizes</span></li>
                  </ul>
                </div>
              </div>
              <!-- end of columns -->
            </div>
          </div>
        </div>
      </div>
      <!-- Past: end -->

    <% end %>

    <% if !@giveaways.any? %>
      <div class="col-md-8 push-md-2">
          <%= render("form") %>
      </div>
    <% end %>
    </div>

  </div>
</div>
